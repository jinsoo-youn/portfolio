+++
author = "Jinsoo Youn"
title = "16ì¥ - Taint & Toleration and Affinity"
date = "2022-08-10"
description = "pod schedulingì˜ ê³ ê¸‰ ê¸°ìˆ "
tags = [
"kubernetes",
"study",
]
categories = [
"kubernetes",
"study",
]
series = ["Kubernetes-In-Action"]
aliases = ["Kubernetes-In-Action"]
image = "cover.png"
+++

podë¥¼ nodeì— ìŠ¤ì¼€ì¥´ë§ í•˜ëŠ” ë°©ë²•ì¸ Taint & Toleration ê·¸ë¦¬ê³  Affinityì— ëŒ€í•´ ì•Œì•„ë³´ì
<!--more-->

<aside>
ğŸ“‚ [https://velog.io/@niyu/k8s-taint-toleration](https://velog.io/@niyu/k8s-taint-toleration)
[https://velog.io/@niyu/k8s-node-affinity-pod-affinity](https://velog.io/@niyu/k8s-node-affinity-pod-affinity)

</aside>

íŒŒë“œ ìŠ¤í™ì˜ ë…¸ë“œ ì…€ë ‰í„°ë¥¼ í†µí•´ íŠ¹ì • ë…¸ë“œë¡œ ìŠ¤ì¼€ì¤„ë˜ëŠ” ê²ƒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì§€ë§Œ k8sëŠ” ì´ë¥¼ í™•ì¥í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤.

> í…Œì¸íŠ¸ ì™€ í†¨ëŸ¬ë ˆì´ì…˜ ì€ íŠ¹ì • ë…¸ë“œì—ì„œ íŒŒë“œì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ í†µì œí•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤. íŒŒë“œëŠ” ë…¸ë“œì˜ í…Œì¸íŠ¸ê°€ í—ˆìš©(tolerate)ëœ ê²½ìš°ì—ë§Œ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë  ìˆ˜ ìˆë‹¤.
>

# í…Œì¸íŠ¸

í…Œì¸íŠ¸ë¥¼ ì„¤ì •í•œ ë…¸ë“œì—ëŠ” íŒŒë“œë“¤ì„ ìŠ¤ì¼€ì¤„ë§í•˜ì§€ ì•ŠëŠ”ë‹¤.

í…Œì¸íŠ¸ì—ëŠ” `key`, `value`, `effect` ê°€ ìˆê³ , `<key>=<value>:<effect>` ìœ¼ë¡œ í‘œì‹œí•œë‹¤.

**ğŸ” í…Œì¸íŠ¸ effect**
ì–´ë–¤ ì‹ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§ì´ ë™ì‘í• ì§€ë¥¼ ì •ì˜í•˜ëŠ” ì„¤ì •ì´ë‹¤.

- `NoSchedule` : ë…¸ë“œê°€ í…Œì¸íŠ¸ë¥¼ í—ˆìš©(tolerate)í•˜ì§€ ì•ŠëŠ” ê²½ìš°, íŒŒë“œê°€ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë˜ì§€ ì•ŠëŠ”ë‹¤.
- `PreferNoSchedule` : ë…¸ë“œ ìŠ¤ì¼€ì¤„ì„ í”¼í•˜ë ¤ê³  í•˜ì§€ë§Œ ë‹¤ë¥¸ ê³³ì—ì„œ ìŠ¤ì¼€ì¤„í•  ìˆ˜ ì—†ëŠ” ê²½ìš°, í•´ë‹¹ ë…¸ë“œì— ìŠ¤ì¼€ì¤„í•œë‹¤.
- `NoExecute` : ìŠ¤ì¼€ì¤„ë§ì—ë§Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” NoScheduleê³¼ PreferNoScheduleê³¼ ë‹¬ë¦¬, ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œì—ë„ ì˜í–¥ì„ ë¯¸ì¹œë‹¤. í•´ë‹¹ ë…¸ë“œì—ì„œ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œë„ NoExecute í…Œì¸íŠ¸ë¥¼ í†¨ëŸ¬ë ˆì´ì…˜í•˜ì§€ ì•ŠëŠ” íŒŒë“œë©´ ë…¸ë“œì—ì„œ ì œê±°í•œë‹¤.

> í…Œì¸íŠ¸ëŠ” ìƒˆë¡œìš´ íŒŒë“œ(NoSchedule effect)ì˜ ìŠ¤ì¼€ì¤„ë§ì„ ë°©ì§€í•˜ê³ , ì„ í˜¸í•˜ì§€ ì•ŠëŠ” ë…¸ë“œ(PreferNoSchedule effect)ë¥¼ ì •ì˜í•˜ë©° ë…¸ë“œì—ì„œ ê¸°ì¡´ íŒŒë“œë¥¼ ì œê±°(NoExecute effect) í•  ìˆ˜ ìˆë‹¤.
>

## í…Œì¸íŠ¸ í™•ì¸

![https://velog.velcdn.com/images/niyu/post/71875306-7197-4d52-bd79-45fdfba979dd/image.png](https://velog.velcdn.com/images/niyu/post/71875306-7197-4d52-bd79-45fdfba979dd/image.png)

ë§ˆìŠ¤í„° ë…¸ë“œì—ëŠ” í•˜ë‚˜ì˜ í…Œì¸íŠ¸ê°€ ìˆê³ , `node-role.kubernetes.io/master` í‚¤, `null` ê°’, `NoSchedule`ì˜ effectë¥¼ ê°€ì§„ë‹¤.

ì´ íŒŒë“œê°€ í…Œì¸íŠ¸ë¥¼ í—ˆìš©(tolerate)í•˜ì§€ ì•Šìœ¼ë©´ íŒŒë“œëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ëª»í•œë‹¤. ì´ í…Œì¸íŠ¸ë¥¼ í—ˆìš©(tolerate)í•˜ëŠ” íŒŒë“œëŠ” ë³´í†µ ì‹œìŠ¤í…œ íŒŒë“œì´ë‹¤.

![https://velog.velcdn.com/images/niyu/post/524dc187-2516-4e9d-8d14-82bb89b8b73d/image.png](https://velog.velcdn.com/images/niyu/post/524dc187-2516-4e9d-8d14-82bb89b8b73d/image.png)

**ì‹œìŠ¤í…œ íŒŒë“œì˜ í†¨ëŸ¬ë ˆì´ì…˜**ê³¼ **ë…¸ë“œì˜ í…Œì¸íŠ¸**ê°€ ì¼ì¹˜í•˜ê¸° ë•Œë¬¸ì— ë§ˆìŠ¤í„° ë…¸ë“œì— ìŠ¤ì¼€ì¤„ëœë‹¤. í†¨ëŸ¬ë ˆì´ì…˜ì´ ì—†ëŠ” íŒŒë“œëŠ” í…Œì¸íŠ¸ê°€ ì—†ëŠ” ì¼ë°˜ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ëœë‹¤.

## í…Œì¸íŠ¸ ì¶”ê°€

```
# ë…¸ë“œì— í…Œì¸íŠ¸ ì¶”ê°€
kubectl taint node node1.k8s node-type=production:NoSchedule

node "node1.k8s" tainted
```

í‚¤ëŠ” node-type, ê°’ì€ production, effectëŠ” NoScheduleê°€ ìˆëŠ” í…Œì¸íŠ¸ê°€ ì¶”ê°€ëœë‹¤.

```
# ë””í”Œë¡œì´ë¨¼íŠ¸ ë°°í¬
kubectl run test --image busybox --replicas 5 -- sleep 9999

deployment "test" create
```

![https://velog.velcdn.com/images/niyu/post/569dc908-a11a-4fe1-a7ab-bf8f2fff5123/image.png](https://velog.velcdn.com/images/niyu/post/569dc908-a11a-4fe1-a7ab-bf8f2fff5123/image.png)

í…Œì¸íŠ¸ëœ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ëœ íŒŒë“œê°€ ì—†ìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

# í†¨ëŸ¬ë ˆì´ì…˜

í†¨ëŸ¬ë ˆì´ì…˜ì€ `íŒŒë“œ`ì— ì ìš©ë˜ë©°, í…Œì¸íŠ¸ëœ ë…¸ë“œì— íŒŒë“œë“¤ì„ ìŠ¤ì¼€ì¤„ë§ë˜ê²Œ í•œë‹¤.

> ë…¸ë“œëŠ” í•˜ë‚˜ ì´ìƒì˜ í…Œì¸íŠ¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê³  íŒŒë“œëŠ” í•˜ë‚˜ ì´ìƒì˜ í†¨ëŸ¬ë ˆì´ì…˜ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
>

## í†¨ëŸ¬ë ˆì´ì…˜ ì¶”ê°€

í†¨ëŸ¬ë ˆì´ì…˜ì—ì„œ key, value, effectëŠ” ì›í•˜ëŠ” taintì˜ ê°’ì„ ì§€ì •í•´ ì£¼ë©´ ëœë‹¤.

```yaml
# í†¨ëŸ¬ë ˆì´ì…˜ ì¶”ê°€ (1)
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: prod
spec:
  replicas: 5
  template:
    spec:
      ...
      tolerations:  # í”„ë¡œë•ì…˜ ë…¸ë“œì— íŒŒë“œê°€ ìŠ¤ì¼€ì¤„ë§ ë  ìˆ˜ ìˆë„ë¡ í†¨ëŸ¬ë ˆì´ì…˜ ì¶”ê°€
      - key: node-type
        operator: Equal
        value: production
        effect: NoSchedule

```

![https://velog.velcdn.com/images/niyu/post/fc10cf27-b239-4f8f-b1a1-bb68ee382c15/image.png](https://velog.velcdn.com/images/niyu/post/fc10cf27-b239-4f8f-b1a1-bb68ee382c15/image.png)

ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ë°°í¬í•˜ë©´ í•´ë‹¹ íŒŒë“œê°€ í”„ë¡œë•ì…˜ ë…¸ë“œì— ë°°í¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```yaml
# í†¨ëŸ¬ë ˆì´ì…˜ ì¶”ê°€ (2)
...
tolerations:
- key: node-type
  operator: Exists
  effect: NoSchedule
```

`Equal` ì—°ì‚°ìë¥¼ ì§€ì •í•´ íŠ¹ì • ê°’ì„ í—ˆìš©í•˜ê±°ë‚˜ `Exists` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” íŠ¹ì • í…Œì¸íŠ¸ í‚¤ì˜ ê°’ì„ í—ˆìš©í•  ìˆ˜ ìˆë‹¤.

- `Equal` : key, valueê°€ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ì—ë§Œ íŒŒë“œ ìŠ¤ì¼€ì¤„ë§ì„ ì§„í–‰í•œë‹¤.
- `Exist` : valueëŠ” í•„ìš”ì—†ê³ , keyë§Œ ì¼ì¹˜í•  ê²½ìš° íŒŒë“œ ìŠ¤ì¼€ì¤„ë§ì„ ì§„í–‰í•œë‹¤.

ë˜í•œ key, effect ê°’ì„ ì£¼ì§€ ì•Šê³  Exists ì˜µì…˜ë§Œ ì¤„ ìˆ˜ë„ ìˆëŠ”ë°, ì´ëŸ¬ë©´ ëª¨ë“  keyì™€ effectì— ì ìš©ë˜ì„œ ì–´ë–¤ taintê°€ ê±¸ë ¤ìˆë˜ ìƒê´€ì—†ì´ ìŠ¤ì¼€ì¤„ë§ë˜ì„œ íŒŒë“œê°€ ì‹¤í–‰ëœë‹¤.

```yaml
tolerations:
- operator: "Exists"
```

## í†¨ëŸ¬ë ˆì´ì…˜ì˜ ì§€ì† ì‹œê°„ ì„¤ì •

**ğŸ” ë¹ŒíŠ¸ì¸ í…Œì¸íŠ¸**
ë…¸ë“œ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” íŠ¹ì • ì»¨ë””ì…˜ì´ ì°¸ì¼ ë•Œ ìë™ìœ¼ë¡œ ë…¸ë“œë¥¼ í…Œì¸íŠ¸ì‹œí‚¨ë‹¤.

- `node.kubernetes.io/not-ready` : ë…¸ë“œê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤. ì´ëŠ” NodeConditionì—ì„œ Ready ê°€ "False"ë¡œ ë¨ì— í•´ë‹¹í•œë‹¤.
- `node.kubernetes.io/unreachable` : ë…¸ë“œê°€ ë…¸ë“œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë„ë‹¬í•  ìˆ˜ ì—†ë‹¤. ì´ëŠ” NodeConditionì—ì„œ Ready ê°€ "Unknown"ë¡œ ë¨ì— í•´ë‹¹í•œë‹¤.
- `node.kubernetes.io/network-unavailable` : ë…¸ë“œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- `node.kubernetes.io/unschedulable` : ë…¸ë“œë¥¼ ìŠ¤ì¼€ì¤„í•  ìˆ˜ ì—†ë‹¤.

[ì´ì™¸ì˜ ë¹ŒíŠ¸ì¸ í…Œì¸íŠ¸ ë³´ê¸°](https://kubernetes.io/ko/docs/concepts/scheduling-eviction/taint-and-toleration/#%ED%85%8C%EC%9D%B8%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%B6%95%EC%B6%9C)

ì¥ì•  ìƒíƒœê°€ ì •ìƒìœ¼ë¡œ ëŒì•„ì˜¤ë©´ kubelet ë˜ëŠ” ë…¸ë“œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ê´€ë ¨ í…Œì¸íŠ¸ë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤.

**ì´ ê¸°ëŠ¥ì„ `tolerationSeconds` ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ìˆëŠ” ë…¸ë“œì—ì„œ íŒŒë“œë¥¼ ì–¼ë§ˆë‚˜ ì˜¤ë˜ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ê¸°ê°„ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.** ì˜ˆë¥¼ ë“¤ì–´, ë„¤íŠ¸ì›Œí¬ ì¥ì• ì—ì„œ ë„¤íŠ¸ì›Œí¬ê°€ ë³µêµ¬ëœ í›„ì— íŒŒë“œê°€ ì œê±°ë˜ëŠ” ê²ƒì„ í”¼í•˜ê¸° ìœ„í•´ ì˜¤ë«ë™ì•ˆ ë…¸ë“œì— ë°”ì¸ë”©ëœ ìƒíƒœë¥¼ ìœ ì§€í•˜ë ¤ê³  í•  ìˆ˜ ìˆë‹¤.

```yaml
# í†¨ëŸ¬ë ˆì´ì…˜ì— tolerationSeconds ì§€ì •
tolerations:
- key: "node.kubernetes.io/notReady"
  operator: "Exists"
  effect: "NoExecute"
  tolerationSeconds: 300
- key: "node.kubernetes.io/unreachable"
  operator: "Exists"
  effect: "NoExecute"
  tolerationSeconds: 300
```

```
# íŒŒë“œ í™•ì¸
$ kubectl describe pod kube-proxy-tf7w5 -n kube-system

Name:                 kube-proxy-tf7w5
...
Tolerations:          node.kubernetes.io/notReady:NoExecute op=Exists
                      node.kubernetes.io/unreachable:NoExecute op=Exists
                      ...
```

ìœ„ ë‘ê°€ì§€ í†¨ëŸ¬ë ˆì´ì…˜ì€ íŒŒë“œê°€ 300ì´ˆ ë™ì•ˆ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ë…¸ë“œë„ í—ˆìš©í•˜ê³  ëŒ€ê¸°í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤.

**k8s ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì€ ë…¸ë“œê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ë” ì´ìƒ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ê³  ê°ì§€í•˜ë©´ 300ì´ˆ ë™ì•ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ íŒŒë“œë¥¼ ì‚­ì œí•˜ê³  ë‹¤ë¥¸ ë…¸ë“œë¡œ ë‹¤ì‹œ ìŠ¤ì¼€ì¤„í•œë‹¤.**

í†¨ëŸ¬ë ˆì´ì…˜ì„ ë³„ë„ë¡œ ì •ì˜í•˜ì§€ ì•Šì€ íŒŒë“œëŠ” ì´ ë‘ í†¨ëŸ¬ë ˆì´ì…˜ì´ ìë™ìœ¼ë¡œ ì¶”ê°€ëœë‹¤. ë§Œì•½ ì¡°ì •í•˜ê³  ì‹¶ë‹¤ë©´ íŒŒë“œ ìŠ¤í™ì— ì´ ë‘ í†¨ëŸ¬ë ˆì´ì…˜ì„ ì¶”ê°€í•´ ì§€ì—° ì‹œê°„ì„ ì§§ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

> í…Œì¸íŠ¸ì™€ í†¨ëŸ¬ë ˆì´ì…˜ì€ ì£¼ë¡œ ë…¸ë“œë¥¼ íŠ¹ì • ì—­í• ë§Œ í•˜ë„ë¡ ë§Œë“¤ ë•Œ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ìš© íŒŒë“œë¥¼ ì‹¤í–‰í•œ í›„ ë…¸ë“œ ì „ì²´ì˜ CPUë‚˜ RAM ìì›ì„ ë…ì í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. GPUê°€ ìˆëŠ” ë…¸ë“œì—ëŠ” ì‹¤ì œë¡œ GPUë¥¼ ì‚¬ìš©í•˜ëŠ” íŒŒë“œë“¤ë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ë„ ìˆë‹¤.
>

---

k8sëŠ” íŒŒë“œë¥¼ ì–´ë–¤ ë…¸ë“œì— ì‹¤í–‰í•  ê²ƒì¸ì§€ì— ê´€í•œ ë‹¤ì–‘í•œ ì˜µì…˜ì´ ìˆë‹¤. íŠ¹ì • íŒŒë“œë“¤ì„ ë…¸ë“œ í•˜ë‚˜ì— ëª¨ì•„ë‘ê±°ë‚˜, ê°™ì€ ê¸°ëŠ¥ì´ ìˆëŠ” íŒŒë“œë“¤ì´ ë…¸ë“œ í•˜ë‚˜ì— ëª°ë ¤ìˆì§€ ì•Šê²Œ ë¶„ì‚°í•´ì„œ ì‹¤í–‰í•  ìˆ˜ë„ ìˆë‹¤.

# ë…¸ë“œ ì–´í”¼ë‹ˆí‹°

í…Œì¸íŠ¸ëŠ” íŠ¹ì • ë…¸ë“œì—ì„œ íŒŒë“œë¥¼ ë©€ë¦¬ ë–¨ì–´ëœ¨ë¦¬ëŠ” ë° ì‚¬ìš©ë˜ì§€ë§Œ, ë…¸ë“œ ì–´í”¼ë‹ˆí‹°(=ì¹œí™”ì„±)ë¥¼ ì´ìš©í•˜ë©´ íŒŒë“œë¥¼ íŠ¹ì • ë…¸ë“œë¡œ ìœ ì¸í•  ìˆ˜ ìˆë‹¤. ì¦‰, k8sì—ê²Œ **ë…¸ë“œì˜ íŠ¹ì • í•˜ìœ„ ì§‘í•©ì—ë§Œ íŒŒë“œë¥¼ ìŠ¤ì¼€ì¤„í•˜ë„ë¡** ì§€ì‹œí•  ìˆ˜ ìˆë‹¤.

`ë…¸ë“œ ì–´í”¼ë‹ˆí‹°`ëŠ” `ë…¸ë“œ ì…€ë ‰í„°`ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë¼ë²¨ì„ ê¸°ë°˜ìœ¼ë¡œ ë…¸ë“œë¥¼ ì„ íƒí•œë‹¤.

## ì–´í”¼ë‹ˆí‹° ê·œì¹™ ì„¤ì •

### Hard affinity

**ğŸ§© ê¸°ì¡´ì˜ ë…¸ë“œ ì…€ë ‰í„°ë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹**

```
apiVersion: v1
kind: Pod
metadata:
  name: kubia-gpu
spec:
  nodeSelector:
    gpu: "true"  # ì´ íŒŒë“œëŠ” gpu=true ë¼ë²¨ì„ ê°–ê³  ìˆëŠ” ë…¸ë“œì—ë§Œ ìŠ¤ì¼€ì¤„ëœë‹¤
...

```

ë…¸ë“œ ì…€ë ‰í„°ë¥¼ ì‚¬ìš©í•´ GPUê°€ ìˆëŠ” ë…¸ë“œì—ë§Œ GPUê°€ í•„ìš”í•œ íŒŒë“œë¥¼ ë°°í¬í•œë‹¤.

**ğŸ§© ë…¸ë“œ ì–´í”¼ë‹ˆí‹° ê·œì¹™ì„ ì´ìš©í•˜ëŠ” ë°©ì‹**

```
apiVersion: v1
kind: Pod
metadata:
  name: kubia-gpu
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:  # ì´ íŒŒë“œëŠ” gpu=true ë¼ë²¨ì´ ìˆëŠ” ë…¸ë“œë¡œë§Œ ìŠ¤ì¼€ì¤„
          - key: gpu
            operator: In
            values:
            - "true"
...

```

ë…¸ë“œ ì…€ë ‰í„°ë³´ë‹¤ í›¨ì”¬ ë³µì¡í•´ì¡Œì§€ë§Œ í›¨ì”¬ ë” ì„¸ë¶€ì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

**ğŸ” requiredDuringSchedulingIgnoredDuringExecution**

- `requiredDuringScheduling...` : ë…¸ë“œê°€ íŒŒë“œë¥¼ ë…¸ë“œì— ìŠ¤ì¼€ì¤„í•˜ê¸° ìœ„í•´ ê°–ê³  ìˆì–´ì•¼ í•˜ëŠ” ë¼ë²¨ì„ ì§€ì •í•¨ì„ ì˜ë¯¸í•œë‹¤.
- `...IgnoredDuringExecution` : ë…¸ë“œì—ì„œ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ íŒŒë“œì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ì¦‰, ìŠ¤ì¼€ì¤„ë§í•˜ëŠ” ë™ì•ˆ ê¼­ í•„ìš”í•œ ì¡°ê±´ì„ ì˜ë¯¸í•œë‹¤.

**ğŸ” nodeSelctorTerms**

- `nodeSelectorTerms` í•„ë“œì™€ `matchExpressions` í•„ë“œë¥¼ ì´ìš©í•´ì„œ íŒŒë“œë¥¼ ì˜ë„í•œ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ë˜ë„ë¡ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

![https://velog.velcdn.com/images/niyu/post/f791c47b-d61e-4ddd-8024-6871421b19d7/image.png](https://velog.velcdn.com/images/niyu/post/f791c47b-d61e-4ddd-8024-6871421b19d7/image.png)

### Soft affinity

ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ì˜ `preferredDuringSchedulingIgnoredDuringExecution` í•„ë“œëŠ” ìŠ¤ì¼€ì¤„ë§í•˜ëŠ” ë™ì•ˆ **ë§Œì¡±í•˜ë©´ ì¢‹ì€** ì¡°ê±´ì„ ì˜ë¯¸í•œë‹¤. prefer ê¸€ì ê·¸ëŒ€ë¡œ ë§Œì¡±í•˜ë©´ ì¢‹ì€ ê²ƒì´ì§€ ê¼­ ì´ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

ì´ë¥¼ ì´ìš©í•´ ìŠ¤ì¼€ì¤„ë§ ì¤‘ì— **ë…¸ë“œì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •**í•  ìˆ˜ ìˆë‹¤. ì¦‰, íŠ¹ì • íŒŒë“œë¥¼ ìŠ¤ì¼€ì¤„í•  ë•Œ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì„ í˜¸í•˜ëŠ” ë…¸ë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

ë¨¼ì € ë™ì‘ í™•ì¸ì„ ìœ„í•´ ë…¸ë“œì— ë¼ë²¨ë§ì„ í•œë‹¤.

![https://velog.velcdn.com/images/niyu/post/5cb9e002-340b-492b-8ac1-95298f32e387/image.png](https://velog.velcdn.com/images/niyu/post/5cb9e002-340b-492b-8ac1-95298f32e387/image.png)

ì˜ˆì œì—ì„œëŠ” ê° ë…¸ë“œì— ë…¸ë“œê°€ ì†í•œ `ê°€ìš© ì˜ì—­`ì„ ì§€ì •í•˜ëŠ” ë¼ë²¨ê³¼, ì´ë¥¼ `ì „ìš©` ë˜ëŠ” `ê³µìœ ` ë…¸ë“œë¡œ í‘œì‹œí•˜ëŠ” ë¼ë²¨ì„ ì„¤ì •í•œë‹¤.

```yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: pref
spec:
  replicas: 5
  template:
    ...
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:  # í•„ìˆ˜ê°€ ì•„ë‹Œ ì„ í˜¸ ì–´í”¼ë‹ˆí‹° ì†ì„± ì§€ì •
          - weight: 80  # ê°€ì¤‘ì¹˜ 80ì˜ availability-zone ì„ í˜¸ë„ ì§€ì •
            preference:  # íŒŒë“œê°€ zone1ì— ìŠ¤ì¼€ì¤„ë˜ëŠ” ê²ƒì„ ë” ì„ í˜¸í•œë‹¤
              matchExpressions:
              - key: availability-zone
                operator: In
                values:
                - zone1
          - weight: 20  # ê°€ì¤‘ì¹˜ 20ì˜ share-type ì„ í˜¸ë„ ì§€ì •
            preference:  # íŒŒë“œë¥¼ ì „ìš© ë…¸ë“œë¡œ ìŠ¤ì¼€ì¤„í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•˜ì§€ë§Œ ê°€ìš© ì˜ì—­ ì„ í˜¸ë„ë³´ë‹¤ 4ë°°ëŠ” ëœ ì¤‘ìš”í•˜ë‹¤
              matchExpressions:
              - key: share-type
                operator: In
                values:
                - dedicated
...

```

`weight` í•„ë“œëŠ” 1ë¶€í„° 100ê¹Œì§€ì˜ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

**zone1ì„ ì „ìš© ë…¸ë“œë¡œ ì„ í˜¸**í•˜ëŠ” ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. `availability-zone=zone1` ê³¼
`share-type=dedicated` ë¼ë²¨ì´ ìˆëŠ” ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë˜ê¸¸ ì›í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì²« ë²ˆì§¸ ì–´í”¼ë‹ˆí‹° ê·œì¹™ì€ ë§¤ìš° ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— ê°€ì¤‘ì¹˜ë¥¼ 80ìœ¼ë¡œ ì„¤ì •í–ˆê³ , ë‘ ë²ˆì§¸ ê·œì¹™ì€ ëœ ì¤‘ìš”í•˜ë¯€ë¡œ 20ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.

![https://velog.velcdn.com/images/niyu/post/04eb3318-1e0a-4333-9e7a-97d0c8780988/image.png](https://velog.velcdn.com/images/niyu/post/04eb3318-1e0a-4333-9e7a-97d0c8780988/image.png)

ë…¸ë“œëŠ” ë„¤ ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ ë¶„í• ëœë‹¤. `ê°€ìš©ì„± ì˜ì—­`ê³¼ `ê³µìœ  ìœ í˜•` ë¼ë²¨ì´ íŒŒë“œì˜ ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ì™€ ì¼ì¹˜í•˜ëŠ” ë…¸ë“œì—ëŠ” **ê°€ì¥ ë†’ì€ ìˆœìœ„**ê°€ ë§¤ê²¨ì§„ë‹¤. ì–´í”¼ë‹ˆí‹° ê·œì¹™ì˜ ê°€ì¤‘ì¹˜ì— ë”°ë¼ `zone1ì˜ ê³µìœ  ë…¸ë“œ`ê°€ ê·¸ ë‹¤ìŒ ìš°ì„ ê¶Œì„ ê°–ê³  ê·¸ ë‹¤ìŒìœ¼ë¡œ `ë‹¤ë¥¸ ì˜ì—­ì˜ ì „ìš© ë…¸ë“œ`ê°€ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤. ê°€ì¥ ë‚®ì€ ìš°ì„ ìˆœìœ„ëŠ” `ê·¸ ì™¸ì˜ ë‹¤ë¥¸ ëª¨ë“  ë…¸ë“œ`ë‹¤.

**ğŸ” SelectorSpreadPriority**

ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë…¸ë“œë¥¼ ê²°ì •í•˜ëŠ” ë° ìˆì–´ì„œ **ì–´í”¼ë‹ˆí‹° ìš°ì„ ìˆœìœ„ ì§€ì • ê¸°ëŠ¥ ì™¸ì—ë„ ë‹¤ë¥¸ ìš°ì„ ìˆœìœ„ ì§€ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.** ê·¸ ì¤‘ í•˜ë‚˜ëŠ” `Selector-SpreadPriority` ì´ë‹¤.

`Selector-SpreadPriority` ê¸°ëŠ¥ì€ ë™ì¼í•œ ë ˆí”Œë¦¬ì¹´ì…‹ ë˜ëŠ” ì„œë¹„ìŠ¤ì— ì†í•˜ëŠ” íŒŒë“œë¥¼ ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚°ì‹œì¼œ ë…¸ë“œ ì¥ì• ë¡œ ì¸í•´ ì „ì²´ ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.

ë§Œì•½ ë…¸ë“œê°€ 2ê°œì¸ í´ëŸ¬ìŠ¤í„°ì— 20ê°œì˜ íŒŒë“œë¥¼ ë°°í¬í•œë‹¤ê³  í•˜ë©´ ë…¸ë“œ ì„ í˜¸ë„ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ í•œìª½ ë…¸ë“œì—ë§Œ 20ê°œê°€ ìŠ¤ì¼€ì¤„ ë  ê²ƒ ê°™ì§€ë§Œ, 20ê°œ ì¤‘ 2ê°œë§Œ ë‹¤ë¥¸ í•œìª½ì˜ ë…¸ë“œë¡œ ìŠ¤ì¼€ì¤„ëœë‹¤. ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ë¥¼ ì§€ì •í•˜ì§€ ì•Šì€ ê²½ìš°ë¼ë©´ íŒŒë“œëŠ” ë‘ ë…¸ë“œ ì£¼ìœ„ì— ê³ ë¥´ê²Œ í™•ì‚°ëœë‹¤.

# íŒŒë“œ ì–´í”¼ë‹ˆí‹°

ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ë¥¼ ì´ìš©í•˜ë©´ ì˜¤ì§ **íŒŒë“œì™€ ë…¸ë“œ ì‚¬ì´ì˜ ì¹œí™”ì„±**ì—ë§Œ ì˜í–¥ì„ ë¯¸ì¹œë‹¤. k8sì—ì„œëŠ” `íŒŒë“œ ì–´í”¼ë‹ˆí‹°` ë¥¼ í†µí•´ **íŒŒë“œë“¤ ê°„ì˜ ì¹œí™”ì„±** ë˜í•œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

## íŒŒë“œ ì–´í”¼ë‹ˆí‹°

ì˜ˆë¥¼ ë“¤ì–´ í”„ë¡ íŠ¸ì—”ë“œ íŒŒë“œì™€ ë°±ì—”ë“œ íŒŒë“œê°€ ìˆë‹¤ê³  ê°€ì •í•  ë•Œ, ì´ ë‘ íŒŒë“œë¥¼ ê°€ê¹Œì´ ë°°ì¹˜í•  ìˆ˜ ìˆë‹¤ë©´ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ë¥¼ íŒŒë“œ ì–´í”¼ë‹ˆí‹°ë¥¼ ì´ìš©í•´ ë‹¬ì„±í•  ìˆ˜ ìˆë‹¤.

```
# app=backend ë ˆì´ë¸”ì„ ë¶™ì¸ ë°±ì•¤ë“œ íŒŒë“œ ìƒì„±
$ kubectl run backend -l app=backend --image busybox -- sleep 99999

deployment "backend" created
```

```yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: frontend
spec:
  replicas: 5
  template:
  ...
    spec:
      affinity:
        podAffinity:  # podAffinity ê·œì¹™ ì •ì˜
          requiredDuringSchedulingIgnoredDuringExecution:  # í•„ìˆ˜ íŒŒë“œ ì–´í”¼ë‹ˆí‹° ì†ì„± ì •ì˜
          - topologyKey: kubernetes.io/hostname  # ì…€ë ‰í„°ì™€ ë¶€í•©í•˜ëŠ” íŒŒë“œì™€ ë™ì¼í•œ ë…¸ë“œì— ë°°í¬
            labelSelector:
              matchLabels:
                app: backend
...
```

ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ì™€ ë‹¤ë¥´ê²Œ íŒŒë“œ ì–´í”¼ë‹ˆí‹°ì—ëŠ” `topologyKey` í•„ë“œë¥¼ ì‚¬ìš©í•œë‹¤. `topologyKey` í•„ë“œëŠ” ë…¸ë“œ ë ˆì´ë¸”ì˜ í‚¤ë¡œ, ë‹¤ë¥¸ íŒŒë“œê°€ **íŒŒë“œì™€ ì–¼ë§ˆë‚˜ ê°€ê¹Œìš´ ìœ„ì¹˜ì— ë°°í¬ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì§€ì •**í•œë‹¤. íŒŒë“œë¥¼ ìŠ¤ì¼€ì¤„ë§í•  ë•Œ ë¨¼ì € íŒŒë“œì˜ ë¼ë²¨ ê¸°ì¤€ìœ¼ë¡œ ëŒ€ìƒ ë…¸ë“œë¥¼ ì°¾ê³  topologyKeyì— ë§¤ì¹­ë˜ëŠ” ë…¸ë“œë“¤ì„ ë°°í¬ ëŒ€ìƒìœ¼ë¡œ ì„ íƒí•œë‹¤.

ì˜ˆì œì—ì„œëŠ” ê°’ì„ kubernetes.io/hostnameìœ¼ë¡œ ì§€ì •í–ˆê¸° ë•Œë¬¸ì— hostnameì„ ê¸°ì¤€ìœ¼ë¡œ ê°™ì€ ë…¸ë“œì— íŒŒë“œë¥¼ ì‹¤í–‰í•œë‹¤.

![https://velog.velcdn.com/images/niyu/post/9bbafb16-0639-4e72-861e-3faba32e90c8/image.png](https://velog.velcdn.com/images/niyu/post/9bbafb16-0639-4e72-861e-3faba32e90c8/image.png)

`app=backend` ë¼ë²¨ì´ ìˆëŠ” `íŒŒë“œ`ì™€ `ë””í”Œë¡œì´ë¨¼íŠ¸`ê°€ ë™ì¼í•œ ë…¸ë“œì— ë°°í¬ë˜ë„ë¡ í•˜ëŠ” í•„ìˆ˜ ìš”êµ¬ ì‚¬í•­ì„ ê°–ëŠ” íŒŒë“œë¥¼ ìƒì„±í•œë‹¤.

![https://velog.velcdn.com/images/niyu/post/b5165290-511e-4496-8737-94d8ef703f81/image.png](https://velog.velcdn.com/images/niyu/post/b5165290-511e-4496-8737-94d8ef703f81/image.png)

![https://velog.velcdn.com/images/niyu/post/1fab1324-10f6-406f-b7ac-77faa4dfa956/image.png](https://velog.velcdn.com/images/niyu/post/1fab1324-10f6-406f-b7ac-77faa4dfa956/image.png)

í”„ë¡ íŠ¸ì—”ë“œ íŒŒë“œê°€ ìƒì„±ë˜ë©´ ë°±ì—”ë“œ íŒŒë“œì™€ ë™ì¼í•œ node2 ë…¸ë“œë¡œ ìŠ¤ì¼€ì¤„ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

**ğŸ” í•„ìˆ˜ ìš”êµ¬ ì‚¬í•­ ëŒ€ì‹  íŒŒë“œ ì–´í”¼ë‹ˆí‹° ì„ í˜¸ë„ í‘œì‹œí•˜ê¸°**

ìŠ¤ì¼€ì¤„ëŸ¬ì—ê²Œ í”„ë¡ íŠ¸ì—”ë“œ íŒŒë“œë¥¼ ë°±ì—”ë“œ íŒŒë“œì™€ ë™ì¼í•œ ë…¸ë“œì— ìŠ¤ì¼€ì¤„í•˜ëŠ” ê²ƒì„ `ì„ í˜¸`í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. `podAffinity`ì˜ `preferredDuringSchedulingIgnoredDuringExecution` ì†ì„±ì„ ì´ìš©í•˜ì—¬ ë…¸ë“œ ì–´í”¼ë‹ˆí‹° ì„¤ì •í•œ ê²ƒê³¼ ë™ì¼í•œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.

```yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: frontend
spec:
  replicas: 5
  template:
    ...
    spec:
      affinity:
        podAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:  # ì„ í˜¸ íŒŒë“œ ì–´í”¼ë‹ˆí‹°
          - weight: 80  # ê°€ì¤‘ì¹˜ 80ì˜ availability-zone ì„ í˜¸ë„ ì§€ì •
            podAffinityTerm:
              topologyKey: kubernetes.io/hostname
              labelSelector:
                matchLabels:
                  app: backend
...
```

ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ì˜ ì„ í˜¸ë„ ì„¤ì • ê·œì¹™ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ê° ê·œì¹™ì˜ ê°€ì¤‘ê°’ì„ ì •ì˜í•´ì•¼ í•œë‹¤.

![https://velog.velcdn.com/images/niyu/post/6c7a83e6-5624-4075-8bea-5c7ade6f2301/image.png](https://velog.velcdn.com/images/niyu/post/6c7a83e6-5624-4075-8bea-5c7ade6f2301/image.png)

![https://velog.velcdn.com/images/niyu/post/f72e1277-6801-4d9a-9bc8-f46d5a486774/image.png](https://velog.velcdn.com/images/niyu/post/f72e1277-6801-4d9a-9bc8-f46d5a486774/image.png)

ë°±ì—”ë“œ íŒŒë“œì™€ ë™ì¼í•œ ë…¸ë“œì— 4ê°œì˜ íŒŒë“œê°€ ë°°í¬ë˜ê³  ë‹¤ë¥¸ ë…¸ë“œì—ëŠ” íŒŒë“œê°€ í•˜ë‚˜ê°€ ë°°í¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

> íŒŒë“œ ì–´í”¼ë‹ˆí‹°ë¥¼ í†µí•´ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ íŒŒë“œë¥¼ ë™ì¼í•œ ìœ„ì¹˜ì— ë°°í¬í•  ìˆ˜ ìˆë‹¤.
>

## íŒŒë“œ ì•ˆí‹°-ì–´í”¼ë‹ˆí‹° (Pod Anti-Affinity)

íŒŒë“œë¥¼ ì„œë¡œ ë©€ë¦¬ ë–¨ì–´ëœ¨ë ¤ ë†“ê³  ì‹¶ì€ ê²½ìš° íŒŒë“œ ì•ˆí‹°-ì–´í”¼ë‹ˆí‹° ì†ì„±ì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

`podAffinity` ëŒ€ì‹  `podAntiAffinity` ì†ì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì™¸ì—ëŠ” podAffinity ì‘ì„± ë°©ì‹ê³¼ ë™ì¼í•˜ë‹¤. **podAntiAffinityì˜ ë¼ë²¨ ì…€ë ‰í„°ì™€ ì¼ì¹˜í•˜ëŠ” íŒŒë“œê°€ ì‹¤í–‰ ì¤‘ì¸ ë…¸ë“œë¥¼ ì„ íƒí•˜ì§€ ì•ŠëŠ”ë‹¤.**

![https://velog.velcdn.com/images/niyu/post/2de5c947-5b9c-4d78-9063-ca856ff22f8d/image.png](https://velog.velcdn.com/images/niyu/post/2de5c947-5b9c-4d78-9063-ca856ff22f8d/image.png)

ìœ„ íŒŒë“œëŠ” `app=foo` ë ˆì´ë¸”ì´ ìˆëŠ” íŒŒë“œê°€ ì‹¤í–‰ì¤‘ì¸ ë…¸ë“œë¡œ ìŠ¤ì¼€ì¤„ë§ ë˜ì§€ ì•ŠëŠ”ë‹¤.

```yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: frontend
spec:
  replicas: 5
  template:
    metadata:
      labels:  # í”„ë¡ íŠ¸ì—”ë“œ íŒŒë“œëŠ” app=frontend ë¼ë²¨ì„ ê°–ëŠ”ë‹¤
        app: frontend
    spec:
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:  # í•„ìˆ˜ì˜ íŒŒë“œ ì•ˆí‹° ì–´í”¼ë‹ˆí‹° ì‚¬ìš©
          - topologyKey: kubernetes.io/hostname
            labelSelector: # í”„ë¡ íŠ¸ì—”ë“œ íŒŒë“œê°€ app=frontend ë¼ë²¨ì„ ê°€ì§„ íŒŒë“œì™€ ê°™ì€ ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ì„¤ì •
              matchLabels:
                app: frontend
      containers: ...

```

íŒŒë“œ ì•ˆí‹°-ì–´í”¼ë‹ˆí‹°ë¥¼ í™œìš©í•´ì„œ ê°™ì€ ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ íŒŒë“œë¥¼ ë¶„ì‚°ì‹œì¼°ë‹¤.

![https://velog.velcdn.com/images/niyu/post/e31e98a4-43aa-40fc-b09a-4711f1007ed6/image.png](https://velog.velcdn.com/images/niyu/post/e31e98a4-43aa-40fc-b09a-4711f1007ed6/image.png)

2ê°œì˜ íŒŒë“œ ì¤‘ 1ê°œëŠ” `ë…¸ë“œ 1`ì—, ë‚˜ë¨¸ì§€ 1ê°œëŠ” `ë…¸ë“œ 2`ì— ìŠ¤ì¼€ì¤„ëë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë™ì¼í•œ ë…¸ë“œì— ìŠ¤ì¼€ì¤„í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ 3ê°œì˜ íŒŒë“œëŠ” `ëŒ€ê¸°(pending) ìƒíƒœ`ê°€ ëœë‹¤.

**ğŸ” íŒŒë“œ ì•ˆí‹°-ì–´í”¼ë‹ˆí‹° í™œìš© ë°©ì•ˆ**

ë‘ ê°œì˜ íŒŒë“œ ì„¸íŠ¸ê°€ ë™ì¼í•œ ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²½ìš° **ì„œë¡œì˜ ì„±ëŠ¥ì„ ë°©í•´í•  ìˆ˜ë„ ìˆëŠ” ê²½ìš°**ì— ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë™ì¼í•œ ê·¸ë£¹ì˜ íŒŒë“œë¥¼ ë‹¤ë¥¸ ê°€ìš© ì˜ì—­ ë˜ëŠ” ë¦¬ì „ì— ë¶„ì‚°ì‹œì¼œ ì „ì²´ ê°€ìš© ì˜ì—­ì— ì¥ì• ê°€ ë°œìƒí•´ë„ ì„œë¹„ìŠ¤ê°€ ì™„ì „íˆ ì¤‘ë‹¨ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

> ë…¸ë“œ ì–´í”¼ë‹ˆí‹°ë¥¼ ì´ìš©í•´ íŒŒë“œë¥¼ ìŠ¤ì¼€ì¤„í•  ë…¸ë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤. íŒŒë“œ ì–´í”¼ë‹ˆí‹°ëŠ” ë™ì¼í•œ ë…¸ë“œì— íŒŒë“œë¥¼ ë°°í¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤. íŒŒë“œ ì•ˆí‹°-ì–´í”¼ë‹ˆí‹°ë¥¼ ì´ìš©í•´ íŠ¹ì • íŒŒë“œ ê°„ì— ì„œë¡œ ë©€ë¦¬ ë–¨ì–´ì§€ê²Œ í•  ìˆ˜ ìˆë‹¤.
>

**References**

- [ì±… | Kubernetes in Action 16ì¥](http://www.yes24.com/Product/Goods/89607047)
- [sungsu9022 | ê³ ê¸‰ ìŠ¤ì¼€ì¤„ë§](https://github.com/sungsu9022/study-kubernetes-in-action/issues/16)